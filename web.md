# Information gathering 

##Find owner, IP addr, and emails

WHOIS http://whois.domaintools.com/

DNS
it with the discovered IPs or the IPs we are given to test
This will help us gather all IPs related to a domain or sub domain.

   nslookup -querytype=ANY <domain, sub-domain, or IP>

Finding targets ISP

Sometimes target may rely on ISP and hosting companies as they may not be the owners of their IP addresses.

 note: When the org is big, Net-blocks may be assigned to it , so no hosting services are involved. 
 A corp is not limited to having only one hosting company. 

http://whois.arin.net/rest/net/NET-108-162-192-0-1/pft
http://whois.domaintools.com/
https://apps.db.ripe.net/search/query.html


Contains a lot of the elements into one: http://www.netcraft.com/



## Infrastructure

Web server fingerprinting 

  HTTP response headers
  netcraft can reveal info on this sometimes
  netcat
    nc <IP> 80
    The response headers should be inspected
    
  httprint
  
  whatweb
  
    reconizes website tech, web server versions, blog platforms, JS libraries, and more
    whatweb -v <domain>
    
  wappalyzer
  
  

Fingerprint webserver modules 

  Note: url rewriting is taking parameters like  id=100 and the webserver will use a regex rule to match the rewrite rule to translate the ID to a webpage then pass it on.
  done with .htaccess in atache with mod_rewrite and IIS uses Ionic Isap rewrite or Helicon isapi rewrite

  Not having the real URL and only the rewritten URL can make it much more difficuly for a pen test to attack the URLs, however still possible by using other channels such as forms, cookies, and headers.
  
  ugly URLS= /test?id=1100
  searchengine friendly = /test/login.php
  
  Note: input from forms are still intact for you to tamper with
  
  hard to RE rewritting rules
  
  
## Enumerate subdomains

[netcraft](http://searchdns.netcraft.com/):  subdomain matches   <domain>

Google: 

  site:.<domain>
   
  as you discover domain remove them from results with -
   
  site:.<domain>.ca -site:www.<domain>.ca
  
  site:.<domain>.ca -inurl:www.
  
Tools: 

  Subdomain bruteforcing. Queries the domain and does not rely on search engines (good for internal).
  
    subbrute <domain> -s <wordlsit>
  
  Querying search engines
  
    dnsrecon: it can use wordlists to enumerate subdomains but can also leaverage searchengines like google. 

    dnsrecon -d <domain>
  
    The harvester: gathers subdomain names from different public resources search engines or PGP key servers. Also gatheres data from sites such as Linkedin, People123, Twitter, Google+ and more
    
     harvester -d <domain> -b <data source, all > -f <output xml or html>
  
     
Zone transfer

 If allowed will give us way more (or all) info related tothe domain/subdomains. 















